<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kampfsportschule Dashboard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React und ReactDOM CDN -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Babel für JSX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.2/babel.min.js"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        // Importieren von React-Komponenten
        const { useState, useEffect } = React;
        
        // Icons als SVG Components
        const SaveIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
        );
        
        const TrendingUpIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-gray-600"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
        );
        
        const AlertTriangleIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg>
        );
        
        const UsersIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-gray-600"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        );
        
        const BarChart4Icon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-gray-600"><path d="M3 3v18h18"></path><path d="M13 17V9"></path><path d="M18 17V5"></path><path d="M8 17v-3"></path></svg>
        );
        
        const UserCheckIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-green-500 mr-1"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><polyline points="16 11 18 13 22 9"></polyline></svg>
        );
        
        const UserMinusIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-red-500 mr-1"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><line x1="22" x2="16" y1="11" y2="11"></line></svg>
        );
        
        const InfoIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-gray-400 cursor-help"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>
        );
        
        // Hauptkomponente
        function KampfsportDashboard() {
            // States für Eingabefelder mit Standardwerten
            const [zielUmsatz, setZielUmsatz] = useState(40000);
            const [aktuellerUmsatz, setAktuellerUmsatz] = useState(32500);
            const [aktiveMitglieder, setAktiveMitglieder] = useState(320);
            const [wunschMitglieder, setWunschMitglieder] = useState(400);
            const [durchschnittsBeitrag, setDurchschnittsBeitrag] = useState(100);
            const [interessentenProMonat, setInteressentenProMonat] = useState(60);
            const [probetrainingProMonat, setProbetrainingProMonat] = useState(40);
            const [abschluesseProMonat, setAbschluesseProMonat] = useState(15);
            const [abgaengeProMonat, setAbgaengeProMonat] = useState(10);
            
            // State für Tooltips
            const [tooltips, setTooltips] = useState({});
            
            // State für das Analyse-Popup
            const [showAnalysePopup, setShowAnalysePopup] = useState(false);
            const [analyseForm, setAnalyseForm] = useState({ name: '', email: '' });
            const [analyseGesendet, setAnalyseGesendet] = useState(false);

            // Laden der gespeicherten Daten beim ersten Rendering
            useEffect(() => {
                const savedData = localStorage.getItem('kampfsportDashboardData');
                if (savedData) {
                  const parsedData = JSON.parse(savedData);
                  setZielUmsatz(parsedData.zielUmsatz || 40000);
                  setAktuellerUmsatz(parsedData.aktuellerUmsatz || 32500);
                  setAktiveMitglieder(parsedData.aktiveMitglieder || 320);
                  setWunschMitglieder(parsedData.wunschMitglieder || 400);
                  setDurchschnittsBeitrag(parsedData.durchschnittsBeitrag || 100);
                  setInteressentenProMonat(parsedData.interessentenProMonat || 60);
                  setProbetrainingProMonat(parsedData.probetrainingProMonat || 40);
                  setAbschluesseProMonat(parsedData.abschluesseProMonat || 15);
                  setAbgaengeProMonat(parsedData.abgaengeProMonat || 10);
                }
            }, []);

            // Tooltip Funktionen
            const showTooltip = (id) => {
                setTooltips(prev => ({ ...prev, [id]: true }));
            };

            const hideTooltip = (id) => {
                setTooltips(prev => ({ ...prev, [id]: false }));
            };

            // Berechnete Werte
            const probetrainingQuote = interessentenProMonat > 0 ? (probetrainingProMonat / interessentenProMonat) * 100 : 0;
            const abschlussQuote = probetrainingProMonat > 0 ? (abschluesseProMonat / probetrainingProMonat) * 100 : 0;
            const kuendigungsRate = aktiveMitglieder > 0 ? (abgaengeProMonat / aktiveMitglieder) * 100 : 0;
            const nettoMitgliederZuwachs = abschluesseProMonat - abgaengeProMonat;
            const monateZumZiel = nettoMitgliederZuwachs > 0 ? Math.ceil((wunschMitglieder - aktiveMitglieder) / nettoMitgliederZuwachs) : Infinity;
            const umsatzPrognose = aktuellerUmsatz + (nettoMitgliederZuwachs * durchschnittsBeitrag);
            const zielErreichung = zielUmsatz > 0 ? (aktuellerUmsatz / zielUmsatz) * 100 : 0;
            
            // Funktionen für Status-Bewertung (grün, gelb, rot)
            const getUmsatzStatus = () => {
                const prozent = (aktuellerUmsatz / zielUmsatz) * 100;
                if (prozent >= 90) return 'gruen';
                if (prozent >= 70) return 'gelb';
                return 'rot';
            };
            
            const getMitgliederStatus = () => {
                const prozent = (aktiveMitglieder / wunschMitglieder) * 100;
                if (prozent >= 90) return 'gruen';
                if (prozent >= 70) return 'gelb';
                return 'rot';
            };
            
            const getProbetrainingQuoteStatus = () => {
                if (probetrainingQuote >= 70) return 'gruen';
                if (probetrainingQuote >= 50) return 'gelb';
                return 'rot';
            };
            
            const getAbschlussQuoteStatus = () => {
                if (abschlussQuote >= 40) return 'gruen';
                if (abschlussQuote >= 25) return 'gelb';
                return 'rot';
            };
            
            const getKuendigungsRateStatus = () => {
                if (kuendigungsRate <= 3) return 'gruen';
                if (kuendigungsRate <= 5) return 'gelb';
                return 'rot';
            };
            
            const getNettoZuwachsStatus = () => {
                if (nettoMitgliederZuwachs >= 10) return 'gruen';
                if (nettoMitgliederZuwachs > 0) return 'gelb';
                return 'rot';
            };

            const getMonateZumZielStatus = () => {
                if (monateZumZiel <= 6) return 'gruen';
                if (monateZumZiel <= 12) return 'gelb';
                if (monateZumZiel === Infinity) return 'rot';
                return 'rot';
            };

            // Funktion zum Speichern der Daten
            const saveData = () => {
                const dataToSave = {
                    zielUmsatz,
                    aktuellerUmsatz,
                    aktiveMitglieder,
                    wunschMitglieder,
                    durchschnittsBeitrag,
                    interessentenProMonat,
                    probetrainingProMonat,
                    abschluesseProMonat,
                    abgaengeProMonat
                };
                
                localStorage.setItem('kampfsportDashboardData', JSON.stringify(dataToSave));
                
                // Zeige Erfolgsmeldung kurz an
                const saveButton = document.getElementById('saveButton');
                if (saveButton) {
                    const originalText = saveButton.innerText;
                    saveButton.innerText = 'Gespeichert!';
                    setTimeout(() => {
                        saveButton.innerText = originalText;
                    }, 2000);
                }
            };
            
        // Funktion zum Zusammenstellen der Auswertungsdaten
const prepareDashboardData = () => {
    return `
Kampfsportschule-Dashboard Auswertung:
-------------------------------------
Zielumsatz: ${zielUmsatz} €
Aktueller Umsatz: ${aktuellerUmsatz} €
Zielerreichung: ${zielErreichung.toFixed(1)}%

Aktive Mitglieder: ${aktiveMitglieder}
Wunschmitglieder: ${wunschMitglieder}
Durchschnittsbeitrag: ${durchschnittsBeitrag} €

Interessenten pro Monat: ${interessentenProMonat}
Probetrainings pro Monat: ${probetrainingProMonat}
Abschlüsse pro Monat: ${abschluesseProMonat}
Abgänge pro Monat: ${abgaengeProMonat}

Probetraining-Quote: ${probetrainingQuote.toFixed(1)}%
Abschluss-Quote: ${abschlussQuote.toFixed(1)}%
Kündigungsrate: ${kuendigungsRate.toFixed(1)}%
Netto-Mitgliederzuwachs: ${nettoMitgliederZuwachs}/Monat
Monate bis Ziel: ${monateZumZiel === Infinity ? '∞' : monateZumZiel}
Umsatz-Prognose: ${umsatzPrognose.toFixed(2)} €/Monat
    `;
};

// Funktion zum Absenden des Analyse-Formulars
const submitAnalyseForm = (e) => {
    e.preventDefault();
    
    // Die Daten des Dashboards zusammenstellen
    const dashboardData = prepareDashboardData();
    
    // E-Mail-Betreff erstellen
    const subject = `Kostenlose Wachstumsanalyse für Kampfsportschule angefordert`;
    
    // E-Mail-Text erstellen
    const body = `
Hallo Team,

ich interessiere mich für eine kostenlose Wachstumsanalyse für meine Kampfsportschule.

Meine Kontaktdaten:
Name: ${analyseForm.name}
E-Mail: ${analyseForm.email}

Hier sind meine aktuellen Daten aus dem Dashboard:

${dashboardData}

Ich freue mich auf euer Feedback!

Viele Grüße,
${analyseForm.name}
    `;
    
    // E-Mail-Link erstellen und öffnen
    window.location.href = `mailto:info@danielzeuner.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    
    // Status aktualisieren
    setAnalyseGesendet(true);
    
    // Nach 3 Sekunden das Popup schließen
    setTimeout(() => {
        setShowAnalysePopup(false);
        setAnalyseGesendet(false);
        setAnalyseForm({ name: '', email: '' });
    }, 3000);
};

            // Render-Funktion
            return (
                <div className="bg-gray-100 min-h-screen p-4">
                    <div className="max-w-6xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
                        {/* Header */}
                        <div className="bg-blue-600 text-white p-6">
                            <h1 className="text-2xl font-bold mb-2">Kampfsportschule Dashboard</h1>
                            <p className="text-blue-100">Alle wichtigen Kennzahlen auf einen Blick</p>
                        </div>
                        
                        {/* Hauptinhalt */}
                        <div className="p-6">
                            {/* Obere Kacheln */}
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                {/* Umsatz-Kachel */}
                                <div className={`p-4 rounded-lg shadow ${getUmsatzStatus() === 'gruen' ? 'bg-green-50 border-l-4 border-green-500' : getUmsatzStatus() === 'gelb' ? 'bg-yellow-50 border-l-4 border-yellow-500' : 'bg-red-50 border-l-4 border-red-500'}`}>
                                    <div className="flex justify-between items-center mb-2">
                                        <h2 className="text-lg font-semibold">Umsatz</h2>
                                        <TrendingUpIcon />
                                    </div>
                                    <div className="flex justify-between text-2xl font-bold">
                                        <span>{aktuellerUmsatz.toLocaleString('de-DE')} €</span>
                                        <span className="text-sm text-gray-500 self-end">von {zielUmsatz.toLocaleString('de-DE')} €</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                                        <div 
                                            className={`h-2.5 rounded-full ${getUmsatzStatus() === 'gruen' ? 'bg-green-500' : getUmsatzStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`} 
                                            style={{ width: `${Math.min(100, zielErreichung)}%` }}>
                                        </div>
                                    </div>
                                    <div className="mt-2 text-sm text-gray-600">
                                        <span>Zielerreichung: {zielErreichung.toFixed(1).replace('.', ',')}%</span>
                                    </div>
                                </div>
                                
                                {/* Mitglieder-Kachel */}
                                <div className={`p-4 rounded-lg shadow ${getMitgliederStatus() === 'gruen' ? 'bg-green-50 border-l-4 border-green-500' : getMitgliederStatus() === 'gelb' ? 'bg-yellow-50 border-l-4 border-yellow-500' : 'bg-red-50 border-l-4 border-red-500'}`}>
                                    <div className="flex justify-between items-center mb-2">
                                        <h2 className="text-lg font-semibold">Mitglieder</h2>
                                        <UsersIcon />
                                    </div>
                                    <div className="flex justify-between text-2xl font-bold">
                                        <span>{aktiveMitglieder}</span>
                                        <span className="text-sm text-gray-500 self-end">von {wunschMitglieder}</span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                                        <div 
                                            className={`h-2.5 rounded-full ${getMitgliederStatus() === 'gruen' ? 'bg-green-500' : getMitgliederStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`} 
                                            style={{ width: `${Math.min(100, (aktiveMitglieder / wunschMitglieder) * 100)}%` }}>
                                        </div>
                                    </div>
                                    <div className="mt-2 text-sm text-gray-600">
                                        <span>Monate bis Ziel: <strong className={getMonateZumZielStatus() === 'gruen' ? 'text-green-600' : getMonateZumZielStatus() === 'gelb' ? 'text-yellow-600' : 'text-red-600'}>
                                            {monateZumZiel === Infinity ? '∞' : monateZumZiel}
                                        </strong></span>
                                    </div>
                                </div>
                                
                                {/* Netto-Zuwachs Kachel */}
                                <div className={`p-4 rounded-lg shadow ${getNettoZuwachsStatus() === 'gruen' ? 'bg-green-50 border-l-4 border-green-500' : getNettoZuwachsStatus() === 'gelb' ? 'bg-yellow-50 border-l-4 border-yellow-500' : 'bg-red-50 border-l-4 border-red-500'}`}>
                                    <div className="flex justify-between items-center mb-2">
                                        <h2 className="text-lg font-semibold">Netto-Mitgliederzuwachs</h2>
                                        <BarChart4Icon />
                                    </div>
                                    <div className="flex justify-between items-center">
                                        <span className="text-2xl font-bold">{nettoMitgliederZuwachs}/Monat</span>
                                        <div className="flex items-center text-sm">
                                            <div className="flex items-center mr-3">
                                                <UserCheckIcon />
                                                <span>+{abschluesseProMonat}</span>
                                            </div>
                                            <div className="flex items-center">
                                                <UserMinusIcon />
                                                <span>-{abgaengeProMonat}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="mt-2 text-sm">
                                        <span className="text-gray-600">Umsatz-Prognose: <span className="font-semibold">{umsatzPrognose.toLocaleString('de-DE')} €/Monat</span></span>
                                    </div>
                                </div>
                            </div>
                            
                            {/* Zwei Spalten Layout für Eingaben und Ergebnisse */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {/* Eingabeformular */}
                                <div className="bg-gray-50 p-6 rounded-lg shadow">
                                    <h2 className="text-xl font-bold mb-4 border-b pb-2">Eingabewerte</h2>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Zielumsatz pro Monat (€)</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('zielUmsatz')} onMouseLeave={() => hideTooltip('zielUmsatz')}>
                                                    <InfoIcon />
                                                    {tooltips.zielUmsatz && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Der monatliche Gesamtumsatz, den du mit deiner Kampfsportschule erreichen möchtest.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={zielUmsatz}
                                                onChange={(e) => setZielUmsatz(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Aktueller Umsatz (€)</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('aktuellerUmsatz')} onMouseLeave={() => hideTooltip('aktuellerUmsatz')}>
                                                    <InfoIcon />
                                                    {tooltips.aktuellerUmsatz && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Der tatsächliche monatliche Gesamtumsatz deiner Kampfsportschule.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={aktuellerUmsatz}
                                                onChange={(e) => setAktuellerUmsatz(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Aktive Mitglieder</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('aktiveMitglieder')} onMouseLeave={() => hideTooltip('aktiveMitglieder')}>
                                                    <InfoIcon />
                                                    {tooltips.aktiveMitglieder && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Die aktuelle Anzahl an zahlenden Mitgliedern in deiner Kampfsportschule.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={aktiveMitglieder}
                                                onChange={(e) => setAktiveMitglieder(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Wunschmitglieder</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('wunschMitglieder')} onMouseLeave={() => hideTooltip('wunschMitglieder')}>
                                                    <InfoIcon />
                                                    {tooltips.wunschMitglieder && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Die Zielanzahl an Mitgliedern, die du erreichen möchtest.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={wunschMitglieder}
                                                onChange={(e) => setWunschMitglieder(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Durchschnittsmitgliedsbeitrag (€)</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('durchschnittsBeitrag')} onMouseLeave={() => hideTooltip('durchschnittsBeitrag')}>
                                                    <InfoIcon />
                                                    {tooltips.durchschnittsBeitrag && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Der durchschnittliche monatliche Beitrag pro Mitglied. Du kannst ihn auch berechnen: Aktueller Umsatz ÷ Aktive Mitglieder
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={durchschnittsBeitrag}
                                                onChange={(e) => setDurchschnittsBeitrag(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Interessenten im Monat</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('interessentenProMonat')} onMouseLeave={() => hideTooltip('interessentenProMonat')}>
                                                    <InfoIcon />
                                                    {tooltips.interessentenProMonat && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Die Anzahl der Personen, die Interesse an deiner Kampfsportschule zeigen (Anfragen, Kontaktaufnahmen, etc.).
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={interessentenProMonat}
                                                onChange={(e) => setInteressentenProMonat(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Probetraining im Monat</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('probetrainingProMonat')} onMouseLeave={() => hideTooltip('probetrainingProMonat')}>
                                                    <InfoIcon />
                                                    {tooltips.probetrainingProMonat && (



<div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Die Anzahl der durchgeführten Probetrainings pro Monat. Aus Interessenten werden Probetrainings.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={probetrainingProMonat}
                                                onChange={(e) => setProbetrainingProMonat(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Abschlüsse im Monat</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('abschluesseProMonat')} onMouseLeave={() => hideTooltip('abschluesseProMonat')}>
                                                    <InfoIcon />
                                                    {tooltips.abschluesseProMonat && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Die Anzahl der Probetrainingsteilnehmer, die tatsächlich Mitglied werden. Aus Probetrainings werden Abschlüsse.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={abschluesseProMonat}
                                                onChange={(e) => setAbschluesseProMonat(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                        
                                        <div>
                                            <div className="flex items-center">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Abgänge im Monat</label>
                                                <div className="relative ml-2" onMouseEnter={() => showTooltip('abgaengeProMonat')} onMouseLeave={() => hideTooltip('abgaengeProMonat')}>
                                                    <InfoIcon />
                                                    {tooltips.abgaengeProMonat && (
                                                        <div className="absolute z-10 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg -right-2 bottom-6">
                                                            Die Anzahl der Mitglieder, die monatlich kündigen oder ihre Mitgliedschaft beenden.
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            <input 
                                                type="number" 
                                                value={abgaengeProMonat}
                                                onChange={(e) => setAbgaengeProMonat(Number(e.target.value))}
                                                className="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            />
                                        </div>
                                    </div>
                                    
                                    <div className="mt-6 flex space-x-4">
                                        <button
                                            id="saveButton"
                                            onClick={saveData}
                                            className="flex items-center px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                                        >
                                            <SaveIcon />
                                            Daten speichern
                                        </button>
                                    </div>
                                </div>
                                
                                {/* Ergebnisse und Auswertung */}
                                <div className="bg-white p-6 rounded-lg shadow">
                                    <h2 className="text-xl font-bold mb-4 border-b pb-2">Auswertung</h2>
                                    
                                    <div className="space-y-4">
                                        {/* Berechnete Werte */}
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="p-3 bg-gray-50 rounded">
                                                <span className="block text-sm text-gray-500">Ø Beitrag pro Mitglied</span>
                                                <span className="text-lg font-bold">{durchschnittsBeitrag.toFixed(2).replace('.', ',')} €</span>
                                            </div>
                                            
                                            <div className="p-3 bg-gray-50 rounded">
                                                <span className="block text-sm text-gray-500">Umsatz-Prognose (nächster Monat)</span>
                                                <span className="text-lg font-bold">{umsatzPrognose.toFixed(2).replace('.', ',')} €</span>
                                            </div>
                                        </div>
                                        
                                        {/* Kennzahlen-Tabelle */}
                                        <table className="w-full mt-4 border-collapse">
                                            <thead>
                                                <tr className="bg-gray-100">
                                                    <th className="p-2 text-left text-gray-700 border">Kennzahl</th>
                                                    <th className="p-2 text-left text-gray-700 border">Wert</th>
                                                    <th className="p-2 text-left text-gray-700 border">Erklärung</th>
                                                    <th className="p-2 text-left text-gray-700 border">Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td className="p-2 border">Probetraining-Quote</td>
                                                    <td className="p-2 border">{probetrainingQuote.toFixed(1).replace('.', ',')}%</td>
                                                    <td className="p-2 border text-xs text-gray-600">Probetrainings ÷ Interessenten</td>
                                                    <td className="p-2 border">
                                                        <span className={`inline-block w-4 h-4 rounded-full ${getProbetrainingQuoteStatus() === 'gruen' ? 'bg-green-500' : getProbetrainingQuoteStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`}></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td className="p-2 border">Abschluss-Quote</td>
                                                    <td className="p-2 border">{abschlussQuote.toFixed(1).replace('.', ',')}%</td>
                                                    <td className="p-2 border text-xs text-gray-600">Abschlüsse ÷ Probetrainings</td>
                                                    <td className="p-2 border">
                                                        <span className={`inline-block w-4 h-4 rounded-full ${getAbschlussQuoteStatus() === 'gruen' ? 'bg-green-500' : getAbschlussQuoteStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`}></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td className="p-2 border">Kündigungsrate</td>
                                                    <td className="p-2 border">{kuendigungsRate.toFixed(1).replace('.', ',')}%</td>
                                                    <td className="p-2 border text-xs text-gray-600">Abgänge ÷ Aktive Mitglieder</td>
                                                    <td className="p-2 border">
                                                        <span className={`inline-block w-4 h-4 rounded-full ${getKuendigungsRateStatus() === 'gruen' ? 'bg-green-500' : getKuendigungsRateStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`}></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td className="p-2 border">Netto-Mitgliederzuwachs</td>
                                                    <td className="p-2 border">{nettoMitgliederZuwachs}/Monat</td>
                                                    <td className="p-2 border text-xs text-gray-600">Abschlüsse - Abgänge</td>
                                                    <td className="p-2 border">
                                                        <span className={`inline-block w-4 h-4 rounded-full ${getNettoZuwachsStatus() === 'gruen' ? 'bg-green-500' : getNettoZuwachsStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`}></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td className="p-2 border">Monate bis Ziel</td>
                                                    <td className="p-2 border">{monateZumZiel === Infinity ? '∞' : monateZumZiel}</td>
                                                    <td className="p-2 border text-xs text-gray-600">(Wunschmitglieder - Aktive) ÷ Netto-Zuwachs</td>
                                                    <td className="p-2 border">
                                                        <span className={`inline-block w-4 h-4 rounded-full ${getMonateZumZielStatus() === 'gruen' ? 'bg-green-500' : getMonateZumZielStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`}></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td className="p-2 border">Zielerreichung Umsatz</td>
                                                    <td className="p-2 border">{zielErreichung.toFixed(1).replace('.', ',')}%</td>
                                                    <td className="p-2 border text-xs text-gray-600">Aktueller Umsatz ÷ Zielumsatz</td>
                                                    <td className="p-2 border">
                                                        <span className={`inline-block w-4 h-4 rounded-full ${getUmsatzStatus() === 'gruen' ? 'bg-green-500' : getUmsatzStatus() === 'gelb' ? 'bg-yellow-500' : 'bg-red-500'}`}></span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        
                                        {/* Metriken-Übersicht */}
                                        <div className="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
                                            <h3 className="font-semibold text-blue-800 mb-2">Wachstumsanalyse</h3>
                                            <p className="text-sm text-blue-600">
                                                Bei deiner aktuellen Wachstumsrate {nettoMitgliederZuwachs > 0 ? `von ${nettoMitgliederZuwachs} Mitgliedern pro Monat` : 'stagniert dein Wachstum oder du verlierst Mitglieder'}.
                                                {nettoMitgliederZuwachs > 0 && monateZumZiel !== Infinity ? ` Du erreichst dein Ziel von ${wunschMitglieder} Mitgliedern in ca. ${monateZumZiel} Monaten.` : ''} 
                                                {nettoMitgliederZuwachs <= 0 ? ' Du solltest dringend an deiner Mitgliedergewinnung und/oder -bindung arbeiten.' : ''}
                                            </p>
                                        </div>
                                        
                                        <div className="mt-6">
                                            <button
                                                onClick={() => setShowAnalysePopup(true)}
                                                className="flex items-center px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
                                            >
                                                <AlertTriangleIcon />
                                                Kostenlose Analyse anfordern
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {/* Handlungsempfehlungen */}
                            <div className="mt-8 p-6 bg-gray-50 rounded-lg shadow">
                                <h2 className="text-xl font-bold mb-4 border-b pb-2">Handlungsempfehlungen</h2>
                                
                                <div className="space-y-4">
                                    {probetrainingQuote < 50 && (
                                        <div className="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg">
                                            <h3 className="font-semibold">Probetraining-Quote verbessern</h3>
                                            <p className="text-sm mt-1">Deine Probetraining-Quote liegt bei {probetrainingQuote.toFixed(1).replace('.', ',')}%. Versuche mehr Interessenten zu einem Probetraining zu bewegen durch bessere Kommunikation und attraktive Angebote.</p>
                                        </div>
                                    )}
                                    
                                    {abschlussQuote < 25 && (
                                        <div className="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-r-lg">
                                            <h3 className="font-semibold">Abschluss-Quote erhöhen</h3>
                                            <p className="text-sm mt-1">Deine Abschluss-Quote liegt bei {abschlussQuote.toFixed(1).replace('.', ',')}%. Verbessere dein Probetraining-Erlebnis und optimiere deinen Verkaufsprozess, um mehr Abschlüsse zu erzielen.</p>
                                        </div>
                                    )}
                                    
                                    {kuendigungsRate > 5 && (
                                        <div className="p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                                            <h3 className="font-semibold">Kündigungsrate senken</h3>
                                            <p className="text-sm mt-1">Deine Kündigungsrate ist mit {kuendigungsRate.toFixed(1).replace('.', ',')}% zu hoch. Verbessere die Mitgliederbindung durch bessere Betreuung, mehr Gemeinschaft und höhere Trainingsqualität.</p>
                                        </div>
                                    )}
                                    
                                    {nettoMitgliederZuwachs <= 0 && (
                                        <div className="p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                                            <h3 className="font-semibold">Negatives Wachstum stoppen</h3>
                                            <p className="text-sm mt-1">Du verlierst mehr Mitglieder als du gewinnst. Konzentriere dich darauf, bestehende Mitglieder zu halten und gleichzeitig deine Neukundengewinnung zu verbessern.</p>
                                        </div>
                                    )}
                                    
                                    {(probetrainingQuote >= 50 && abschlussQuote >= 25 && kuendigungsRate <= 5 && nettoMitgliederZuwachs > 0) && (
                                        <div className="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                                            <h3 className="font-semibold">Gute Arbeit!</h3>
                                            <p className="text-sm mt-1">Deine Kennzahlen sehen gut aus. Fokussiere dich jetzt darauf, dein Wachstum weiter zu steigern und deine Prozesse noch effizienter zu gestalten.</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                        
                        {/* Footer */}
                        <div className="bg-gray-50 p-4 text-center text-gray-500 text-sm border-t">
                            <p>Kampfsportschule Dashboard © 2025</p>
                        </div>
                    </div>
                    
                    {/* Analyse-Popup */}
                    {showAnalysePopup && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-lg shadow-lg max-w-md w-full p-6">
                                {!analyseGesendet ? (
                                    <>
                                        <h2 className="text-xl font-bold mb-4">Kostenlose Analyse anfordern</h2>
                                        <p className="mb-4 text-gray-600">
                                            Ein Kampfsport-Business-Experte wird deine Daten analysieren und dir persönlich Optimierungsvorschläge unterbreiten.
                                        </p>
                                        
                                        <form onSubmit={submitAnalyseForm}>
                                            <div className="mb-4">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Name</label>
                                                <input 
                                                    type="text" 
                                                    value={analyseForm.name}
                                                    onChange={(e) => setAnalyseForm({...analyseForm, name: e.target.value})}
                                                    className="w-full p-2 border rounded"
                                                    required
                                                />
                                            </div>
                                            
                                            <div className="mb-4">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">E-Mail</label>
                                                <input 
                                                    type="email" 
                                                    value={analyseForm.email}
                                                    onChange={(e) => setAnalyseForm({...analyseForm, email: e.target.value})}
                                                    className="w-full p-2 border rounded"
                                                    required
                                                />
                                            </div>
                                            
                                            <div className="flex justify-end space-x-2">
                                                <button
                                                    type="button"
                                                    onClick={() => setShowAnalysePopup(false)}
                                                    className="px-4 py-2 border text-gray-700 rounded hover:bg-gray-100"
                                                >
                                                    Abbrechen
                                                </button>
                                                <button
                                                    type="submit"
                                                    className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                                >
                                                    Absenden
                                                </button>
                                            </div>
                                        </form>
                                    </>
                                ) : (
                                    <div className="text-center py-6">
                                        <div className="w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <h3 className="text-lg font-semibold mb-2">Vielen Dank!</h3>
                                        <p className="text-gray-600">Deine Anfrage wurde erfolgreich übermittelt. Wir melden uns in Kürze bei dir.</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Rendern der App
        ReactDOM.render(<KampfsportDashboard />, document.getElementById('root'));
    </script>
</body>
</html>